define("wkview:widget/common_toc/reader_html/page_body/main.js",function(e,i,t){function n(e){p(document).scrollTop()>=300&&"fixed"!==p(e).css("position")?p(e).css({position:"fixed",top:"50px"}):p(document).scrollTop()<300&&"absolute"!==p(e).css("position")&&p(e).css({position:"absolute",top:"294px"})}e("wkcommon:widget/ui/lib/async_widget/async_widget.js");var o=e("wkcommon:widget/ui/lib/browser/browser.js"),c=e("wkview:widget/crmAd/crmAd2.js"),d=e("wkview:widget/crm_multi/crm_multi.js"),a=e("wkview:widget/crmAd/zyAd.js"),l=e("wkview:widget/commerce/fengchao/modelAnimation.js"),s=e("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),r=e("wkview:widget/ui/detectImgBlock/hijack.js"),w=e("wkcommon:widget/ui/lib/BigPipe/BigPipe.js"),f=e("wkview:widget/crmAd/crmAd3.js"),m=e("wkview:widget/fengchao_right/fengchao_right.js"),g=e("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),u=e("wkview:widget/commerce/fengchao/left.js"),h=e("wkcommon:widget/lib/tangram/base/base.js"),p=e("wkcommon:widget/ui/lib/jquery/jquery.js"),k=e("wkview:widget/ad_xpageForm/xpageForm.js"),v=e("wkview:widget/node_modules/@baidu/wenku-model-user/index.js"),_=e("wkcommon:widget/ui/js_core/log/log.js"),b=e("wkcommon:widget/lib/fis/data/data.js"),x=b.get("WkInfo")||{},A=x&&x.WkAdInfo,j=A.blockStatus,y=function(e){p.extend(!0,this.ops,e),this.bindEvent().run()};y.prototype={constructor:y,ops:{docId:"",docTitle:"",flag:1,needShowAd:1,needShowAd2:1,orgName:""},bindEvent:function(){var e=function(){var e=p(".daily-recom-wrap"),i=p(".reader-container").width();e.css("width",i),900>i?e.addClass("small-wrap"):e.removeClass("small-wrap")};return e(),h.lang.eventCenter.addEventListener("Reader.zoomChange",e),this},run:function(){var e=this.ops;if(p(function(){p(".async-widget").widgetAsync({effect:o.ie&&o.ie<8?"show":"slideDown",effect_speed:!1})}),!e.flag)return this;var i=s.detectImgBlock(),t=[];t.push({url:"/browse/widget/viewrecom?pagelets[]=view-like-recom&doc_id="+e.docId,id:"view-like-recom"});var h=function(){this.next=function(){if(t.length){var o=t.shift();w.fetch(o.url,o.id)}else p.event.trigger("orgRightRecon"),p.event.trigger("rightDocLoadEnd");p("#wkgg").on("click",function(){_.xsend(1,102148,{})}),p("#ggbtm").on("click",".fc-link",function(){_.xsend(1,102149,{})});var s=!1;v.getVipInfo().done(function(e){e&&(e.isClassicVip||e.isJiaoyuVip||e.isVip||e.isWenkuEduVip||e.isWenkuVip)&&(s=!0)});var h=b.get("WkInfo")||{};p("#fc-left")&&!s&&h.DocInfo&&"19"!==h.DocInfo.flag&&p.ajax({url:"//wenku.baidu.com/xpage/form/getform?id=fcpcview",success:function(e){if(0===e.status.code){var i=e.data.form_data.left;Math.floor(100*Math.random())<=i&&u.fetchData().then(function(e){var i=e.ads[0];if(i.title&&i.title.length>22&&(i.title=i.title.substr(0,22)+"..."),i.style.idea3009||i.style.idea2062){if(!window.ecom||!window.ecom.pl3){var t=document.createElement("script");t.innerHTML=e.script,document.body.appendChild(t)}p("#fc-left .content").text(i.title),p("#fc-left #fc-click").attr("href",i.link),p("#fc-left #fc-click").attr("datasign",e.time),i.style&&i.style.idea3009&&i.style.idea3009.image_item&&i.style.idea3009.image_item.length&&p("#fc-left img").attr("src",i.style.idea3009.image_item[0].image_link),i.style&&i.style.idea2062&&i.style.idea2062.pic_url&&p("#fc-left img").attr("src",i.style.idea2062.pic_url),n("#fc-left"),p("#fc-left").show(),p("#fc-left").on("click",".vip",function(){new g}),p("#fc-left").on("click",".close",function(){p("#fc-left").hide()}),_.xsend(1,102036,{index:1}),p("#fc-left").on("click",function(){window.ecom&&window.ecom.ck&&window.ecom.ck.addCkOnUrl&&(i.link=window.ecom.ck.addCkOnUrl(i.link,e.time),p("#fc-left #fc-click").attr("href",i.link))}),p(window).scroll(function(){n("#fc-left")})}})}}}),e.needShowAd&&p.when(i).then(p(".other-like-doc").height()>10?function(){new f({ele:p("#guess-like-doc"),pid:7})}:function(){m.init()});new r;if(e.needShowAd2||e.is_tianyancha_doc){var x=new d({title:e.docTitle}),A=function(){var i=(new c({ele:p("#wkad18"),pid:18,isVip:s}),new c({ele:p("#wkad21"),pid:21,isVip:s}),Math.random());return a.show2To3({el:p("#wkad21-2"),next:function(){x.show2To3(function(){new f({ele:p("#wkad21-2"),pid:5})},i)}}),s?p(".ad-vip-close-bottom").remove():x.showDocBtm(function(){},i),a.show3To4({el:p("#html-reader-AD-3t4"),next:function(){l.fetchData().then(function(e){e.ads[2].length?(window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-3t4",{im_time_sign:e.im_time_sign,ads:e.ads[2]}),p("#html-reader-AD-3t4").append('<a class="ad-logo"></a>')):a.show3To4Wangmeng()}).fail(function(){a.show3To4Wangmeng()})}}),p("#html-reader-AD-4t5").length>0&&a.show4To5({el:p("#html-reader-AD-4t5"),next:function(){l.fetchData().then(function(e){e.ads[3].length?(window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-4t5",{im_time_sign:e.im_time_sign,ads:e.ads[3]}),p("#html-reader-AD-4t5").append('<a class="ad-logo"></a>')):x.show4To5(i)}).fail(function(){x.show4To5(i)})}}),a.show5To6({el:p("#html-reader-AD-5t6"),next:function(){new k({el:"#html-reader-AD-5t6",orgName:e.orgName})}}),s||j?void p(".ggbtm-vip-close").remove():void a.showFooter({el:p("#ggbtm"),next:function(){new f({ele:p("#ggbtm"),pid:2})}})};p.when(i).then(function(){A()})}}},x=new h;if(w.on("pagerendercomplete",x.next,this),t.length){var A=t.shift();w.fetch(A.url,A.id)}return this}},t.exports=y});